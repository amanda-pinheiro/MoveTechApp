<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="atualizaExercicio.Views.Home"
             Title="Home"
             Background="#0F0F10">


    <ContentPage.Resources>
        <ResourceDictionary>           

            <!-- Text Styles -->
            <Style x:Key="TitleLabel" TargetType="Label">
                <Setter Property="FontSize" Value="18"/>
                <Setter Property="TextColor" Value="White"/>
                <Setter Property="FontFamily" Value="QuicksandRegular"/>
            </Style>

            <Style x:Key="SubLabel" TargetType="Label">
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="TextColor" Value="#BBBBBB"/>
                <Setter Property="FontFamily" Value="QuicksandRegular"/>
            </Style>

            <Style x:Key="SmallLabel" TargetType="Label">
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="TextColor" Value="#9E9E9E"/>
                <Setter Property="FontFamily" Value="QuicksandLight"/>
            </Style>

            <Style TargetType="SearchBar">
                <Setter Property="FontFamily" Value="QuicksandRegular"/>
            </Style>

        </ResourceDictionary>
    </ContentPage.Resources>
    
    <AbsoluteLayout>
        <Grid RowDefinitions="Auto,*,Auto" Padding="0"
        AbsoluteLayout.LayoutBounds="0,0,1,1"
        AbsoluteLayout.LayoutFlags="All">

            <!-- Header -->
            <Grid Grid.Row="0"             
                 Padding="15,10" 
                 HeightRequest="70"                
                 VerticalOptions="Start">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Menu hamburguer -->
                <ImageButton Source="menu_burguer_34dp.png"                   
                             WidthRequest="25"
                             HeightRequest="25"
                             BackgroundColor="Transparent"
                             Grid.Column="0"
                             Clicked="OnMenuClicked"/>
                <!-- Logo -->
                <Label Text="MoveTech"
                       TextColor="Lavender"
                       FontSize="20"
                       FontFamily="QuicksandMedium"
                       VerticalOptions="Center"
                       Grid.Column="2"/>
            </Grid>
            
            <ScrollView Grid.Row="1">
                <VerticalStackLayout Padding="16" Spacing="18">                   

                    <!-- Search bar + Novo Treino -->

                    <Grid ColumnDefinitions="Auto,*,Auto" VerticalOptions="Center" ColumnSpacing="8" Padding="0">
                        <!-- optional left icon -->
                        <SearchBar Grid.Column="1"
                                   Placeholder="Buscar atividade"
                                   PlaceholderColor="#CABAEB"
                                   BackgroundColor="#2C2C2C"
                                   TextColor="#CABAEB"
                                   FontFamily="QuicksandRegular"
                                   HeightRequest="45"
                                   VerticalOptions="Center"/>

                        <!-- Botão "Novo Treino" simulado com Frame -->
                        <Grid Grid.Column="2"
                              WidthRequest="58"
                              HeightRequest="58"
                              HorizontalOptions="End"
                              VerticalOptions="Center"
                              Margin="5,0,0,0">

                            <!-- Botão real — irá receber o clique -->
                            <Button BackgroundColor="#1C1C1E"
                                    BorderColor="#4D2D8C"
                                    CornerRadius="16"
                                    Padding="0"
                                    Command="{Binding NovoTreinoCommand}"
                                    HorizontalOptions="Fill"
                                    VerticalOptions="Fill"
                                    Clicked="novoTreino_Clicked"/>

                            <!-- Visual sobreposto (não intercepta toques) -->
                            <VerticalStackLayout Spacing="0"
                                                 HorizontalOptions="Center"
                                                 VerticalOptions="Center"
                                                 IsVisible="True">
                                <Label Text="+"
                                       FontSize="30"
                                       FontFamily="QuicksandSemibold"
                                       TextColor="#4D2D8C"
                                       HorizontalOptions="Center"/>
                                <Label Text="Novo Treino"
                                       FontSize="8"
                                       FontFamily="QuicksandRegular"
                                       TextColor="White"
                                       HorizontalOptions="Center"/>
                            </VerticalStackLayout>
                        </Grid>

                    </Grid>

                    <!-- Próximo Treino -->
                    <Label Text="Próximo Treino:" 
                           Style="{StaticResource SubLabel}" 
                           FontSize="16" />

                    <Frame CornerRadius="12"
                           Padding="12"
                           HasShadow="False"
                           BackgroundColor="#4C795CB3">
                        <!-- alfa via hex para só o fundo -->
                        <Grid ColumnDefinitions="*,120"
                              RowDefinitions="Auto,Auto,Auto,Auto"
                              ColumnSpacing="10">

                            <!-- Coluna esquerda: informações -->
                            <StackLayout Grid.Column="0" Grid.Row="0" Spacing="6">
                                <Label Text="Treino: Título do Treino"
                                       Style="{StaticResource TitleLabel}"
                                       FontSize="14"
                                       Margin="10"/>

                                <Label Text="Data: 29/08/2025"
                                       Style="{StaticResource SmallLabel}"
                                       TextColor="#FFFFFF"
                                       FontSize="14"
                                       Margin="10"/>

                                <Label Text="Tempo: 1h35"
                                       Style="{StaticResource SmallLabel}"
                                       TextColor="#FFFFFF"
                                       FontSize="14"
                                       Margin="10"/>
                            </StackLayout>

                            <!-- Coluna direita: grupo muscular e imagem -->
                            <VerticalStackLayout Grid.Column="1"
                                                 Grid.Row="0"
                                                 HorizontalOptions="Center"
                                                 VerticalOptions="Center"
                                                 Spacing="6">
                                <Label Text="Grupo Muscular"
                                       Style="{StaticResource SmallLabel}"
                                       HorizontalTextAlignment="Center"
                                       TextColor="#FFFFFF"/>

                                <Label Text="Membros Inferiores"
                                       Style="{StaticResource SmallLabel}"
                                       HorizontalTextAlignment="Center"
                                       TextColor="#FFFFFF"/>

                                <Frame WidthRequest="84"
                                       HeightRequest="84"
                                       CornerRadius="42"
                                       Padding="6"
                                       HasShadow="False"
                                       BackgroundColor="#FFFFFF">
                                    <Image Source="https://gifdotreino.com/Exercicios/Pernas/Agachamento%20no%20Smith.gif"
                               Aspect="AspectFit"/>
                                </Frame>
                            </VerticalStackLayout>

                            <!-- Linha de espaçamento (opcional) -->
                            <BoxView Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" HeightRequest="4" BackgroundColor="Transparent" />

                            <!-- Outra linha de espaçamento (opcional) -->
                            <BoxView Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" HeightRequest="4" BackgroundColor="Transparent" />

                            <!-- Botão ocupando toda a base -->
                            <Button Grid.Row="3"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    Text="Iniciar"
                                    CornerRadius="20"
                                    HeightRequest="44"
                                    Padding="10,0"
                                    BackgroundColor="#4E2CA0"
                                    TextColor="White"
                                    FontFamily="QuicksandSemibold"
                                    FontSize="14"
                                    HorizontalOptions="Fill"
                                    VerticalOptions="End"
                                    Margin="0,10,0,0"/>
                        </Grid>
                    </Frame>

                    <!-- Recent Activity -->
                    <Label Text="O que você fez recentemente:" 
                           Style="{StaticResource SubLabel}" 
                           FontSize="16" />

                    <Frame CornerRadius="12"
                           Padding="12"
                           HasShadow="False"
                           BackgroundColor="#4C795CB3">
                        <!-- alfa via hex para só o fundo -->
                        <Grid ColumnDefinitions="*,120"
                              RowDefinitions="Auto,Auto,Auto,Auto"
                              ColumnSpacing="10">

                            <!-- Coluna esquerda: informações -->
                            <StackLayout Grid.Column="0" Grid.Row="0" Spacing="6">
                                <Label Text="Treino: Título do Treino"
                                       Style="{StaticResource TitleLabel}"
                                       FontSize="14"
                                       Margin="10"/>

                                <Label Text="Data: 29/08/2025"
                                       Style="{StaticResource SmallLabel}"
                                       TextColor="#FFFFFF"
                                       FontSize="14"
                                       Margin="10"/>

                                <Label Text="Tempo: 1h35"
                                       Style="{StaticResource SmallLabel}"
                                       TextColor="#FFFFFF"
                                       FontSize="14"
                                       Margin="10"/>
                            </StackLayout>

                            <!-- Coluna direita: grupo muscular e imagem -->
                            <VerticalStackLayout Grid.Column="1"
                                                 Grid.Row="0"
                                                 HorizontalOptions="Center"
                                                 VerticalOptions="Center"
                                                 Spacing="6">
                                <Label Text="Grupo Muscular"
                                       Style="{StaticResource SmallLabel}"
                                       HorizontalTextAlignment="Center"
                                       TextColor="#FFFFFF"/>

                                <Label Text="Membros Inferiores"
                                       Style="{StaticResource SmallLabel}"
                                       HorizontalTextAlignment="Center"
                                       TextColor="#FFFFFF"/>

                                <Frame WidthRequest="84"
                                       HeightRequest="84"
                                       CornerRadius="42"
                                       Padding="6"
                                       HasShadow="False"
                                       BackgroundColor="#FFFFFF">
                                    <Image Source="https://gifdotreino.com/Exercicios/Pernas/Agachamento%20no%20Smith.gif"
                               Aspect="AspectFit"/>
                                </Frame>
                            </VerticalStackLayout>

                            <!-- Linha de espaçamento (opcional) -->
                            <BoxView Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" HeightRequest="4" BackgroundColor="Transparent" />

                            <!-- Outra linha de espaçamento (opcional) -->
                            <BoxView Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" HeightRequest="4" BackgroundColor="Transparent" />

                            <!-- Botão ocupando toda a base -->
                            <Button Grid.Row="3"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    Text="Iniciar"
                                    CornerRadius="20"
                                    HeightRequest="44"
                                    Padding="10,0"
                                    BackgroundColor="#4E2CA0"
                                    TextColor="White"
                                    FontFamily="QuicksandSemibold"
                                    FontSize="14"
                                    HorizontalOptions="Fill"
                                    VerticalOptions="End"
                                    Margin="0,10,0,0"/>
                        </Grid>
                    </Frame>

                    <Frame CornerRadius="16"
                           Padding="0"
                           HasShadow="False"
                           BackgroundColor="{StaticResource CardDark}">
                        <Grid HeightRequest="145" RowDefinitions="Auto,*" ColumnDefinitions="* , Auto">
                            <!-- Imagem de fundo que preenche todo o Grid -->
                            <Image Source="banner.jpg"
                                   Aspect="AspectFill"
                                   Opacity="1"
                                   Grid.RowSpan="2"
                                   Grid.ColumnSpan="2"/>

                            <!-- Título no topo, centralizado -->
                            <Label Grid.Row="0" 
                                   Grid.Column="0" 
                                   Grid.ColumnSpan="2"
                                   Text="Mantenha seus treinos atualizados"
                                   FontFamily="QuicksandRegular"
                                   FontSize="16"
                                   TextColor="#161823"
                                   HorizontalOptions="End"
                                   VerticalOptions="Start"
                                   Margin="12,8,12,0"/>

                            <!-- Botão pílula à direita, sobre a imagem -->
                            <Button Grid.Row="1" Grid.Column="1"
                                    Text="Clique aqui"
                                    CornerRadius="20"
                                    BackgroundColor="{StaticResource AccentDark}"
                                    TextColor="White"
                                    FontFamily="QuicksandRegular"
                                    FontSize="14"
                                    Padding="18,8"
                                    HorizontalOptions="End"
                                    VerticalOptions="Center"
                                    Margin="0,0,16,12"
                                    Clicked="Button_Clicked_VerTreinos"/>
                        </Grid>
                    </Frame>

                    <BoxView HeightRequest="30" BackgroundColor="Transparent"/>

                </VerticalStackLayout>
            </ScrollView>
        </Grid>

        <!--overlay do fundo, que ao clicar em qualquer lugar o menu burguer fecha-->
        <BoxView x:Name="OverlayFundo"
             BackgroundColor="Black"
             Opacity="0.01"
             IsVisible="False"
             AbsoluteLayout.LayoutBounds="0,0,1,1"
             AbsoluteLayout.LayoutFlags="All">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnOverlayTapped" />
            </BoxView.GestureRecognizers>
        </BoxView>

        <!-- Menu que aparece ao clicar o burguer  -->
        <Frame x:Name="MenuLateral"
           IsVisible="False"
           Padding="0" 
           Margin="0"
           WidthRequest="80"    
           TranslationX="22"
           TranslationY="50"
           HasShadow="False"
           BackgroundColor="Transparent"    
           BorderColor="Transparent"
           VerticalOptions="Start"
           HorizontalOptions="Start">

            <VerticalStackLayout Spacing="0">
                <Button Text="Sobre" Clicked="Sobre_Clicked"
                    BackgroundColor="Grey"
                    FontSize="12"
                    CornerRadius="0"/>
                <Button Text="Contato" Clicked="Contato_Clicked"
                    BackgroundColor="Grey"
                    FontSize="12"
                    CornerRadius="0"/>
                <Button Text="Logout" Clicked="Logout_Clicked"
                    BackgroundColor="Grey"
                    FontSize="12"
                    CornerRadius="0"/>
            </VerticalStackLayout>
        </Frame>

    </AbsoluteLayout>
</ContentPage>
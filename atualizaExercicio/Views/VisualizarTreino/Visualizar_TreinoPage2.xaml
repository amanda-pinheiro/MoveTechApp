<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"             
             x:Class="atualizaExercicio.Views.VisualizarTreino.Visualizar_TreinoPage2"
             Title="Visualizar_TreinoPage2"
             BackgroundColor="#0F0F10">

    <ContentPage.Resources>
        <ResourceDictionary>
            <!-- Text Styles -->
            <Style x:Key="TitleLabel" TargetType="Label">
                <Setter Property="FontSize" Value="18"/>
                <Setter Property="TextColor" Value="White"/>
                <Setter Property="FontFamily" Value="QuicksandRegular"/>
            </Style>

            <Style x:Key="SubLabel" TargetType="Label">
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="TextColor" Value="#BBBBBB"/>
                <Setter Property="FontFamily" Value="QuicksandRegular"/>
            </Style>

            <Style x:Key="SmallLabel" TargetType="Label">
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="TextColor" Value="#9E9E9E"/>
                <Setter Property="FontFamily" Value="QuicksandLight"/>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <AbsoluteLayout>
        <Grid RowDefinitions="Auto,Auto,*,Auto"
            AbsoluteLayout.LayoutBounds="0,0,1,1"
            AbsoluteLayout.LayoutFlags="All">

            <!-- Header -->
            <Grid Grid.Row="0"
                  BackgroundColor="#0F0F10" 
                  Padding="15,10" 
                  HeightRequest="70"                   
                  VerticalOptions="Start">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Menu hamburguer -->
                <ImageButton Source="menu_burguer_34dp.png"
                             Margin="0,0,0,0"
                             WidthRequest="25"
                             HeightRequest="25"
                             BackgroundColor="Transparent"
                             Grid.Column="0"
                             Clicked="MenuButton_Clicked"/>

                <!-- Logo -->
                <Label Text="MoveTech"
                       TextColor="Lavender"
                       FontSize="20"
                       FontFamily="QuicksandMedium"
                       VerticalOptions="Center"
                       Grid.Column="2"/>
            </Grid>

            <!-- Título do Treino -->
            <VerticalStackLayout Grid.Row="1"
                     HorizontalOptions="Center"
                     Margin="0,0,0,10">
                <Label x:Name="TituloTreinoLabel"
                       Text="Treino" 
                       TextColor="Lavender"
                       FontSize="18"
                       FontFamily="QuicksandSemibold"             
                       HorizontalOptions="Center"/>
            </VerticalStackLayout>

            <!-- Conteúdo - Lista de Exercícios -->
            <Frame Grid.Row="2" 
                Margin="10,0,10,0"
                BackgroundColor="#4A795CB3"
                CornerRadius="12"
                HasShadow="False">

                <Grid RowDefinitions="Auto,Auto,*">

                    <!-- Cabeçalho da lista -->
                    <Grid Grid.Row="0" ColumnDefinitions="*,*"
                          HeightRequest="20"
                          Margin="0,10,0,5">

                        <Label Grid.Column="0"                           
                           Text="Exercício" 
                           FontSize="16"
                           TextColor="White"
                           FontFamily="QuicksandRegular"    
                           HorizontalOptions="Start"                          
                           Margin="10,0,0,0"/>

                        <Label Grid.Column="1"                          
                            Text="Séries x Reps" 
                            FontSize="16"
                            TextColor="White"
                            FontFamily="QuicksandRegular"   
                            HorizontalOptions="End"                        
                            Margin="0,0,10,0"/>
                    </Grid>

                    <!-- Linha divisória -->
                    <BoxView Grid.Row="1" HeightRequest="1" Color="#E6E6FA" Margin="0,5"/>

                    <!-- Lista de exercícios -->
                    <CollectionView Grid.Row="2"
                        x:Name="ExerciciosCollectionView"
                        SelectionMode="None"
                        VerticalScrollBarVisibility="Never"
                        Margin="0,10,0,0">

                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <VerticalStackLayout Spacing="0">

                                    <Grid ColumnDefinitions="Auto,120,*"
                                        HeightRequest="65"
                                        Margin="0,5">

                                        <!-- Imagem do exercício -->
                                        <Frame Grid.Column="0"
                                               CornerRadius="10"
                                               Padding="0"
                                               Margin="5,0,0,0"
                                               HasShadow="False"
                                               IsClippedToBounds="True"                      
                                               BackgroundColor="Transparent"
                                               BorderColor="Transparent"
                                               HeightRequest="50"
                                               WidthRequest="50">
                                            <Image Source="{Binding ImagemExercicio}" 
                                                   Aspect="AspectFill"
                                                   HorizontalOptions="Fill"
                                                   VerticalOptions="Fill">
                                                <Image.Triggers>
                                                    <DataTrigger TargetType="Image"
                                                                 Binding="{Binding ImagemExercicio}"
                                                                 Value="{x:Null}">
                                                        <Setter Property="Source" Value="placeholder_exercicio.png" />
                                                    </DataTrigger>
                                                    <DataTrigger TargetType="Image"
                                                                 Binding="{Binding ImagemExercicio}"
                                                                 Value="">
                                                        <Setter Property="Source" Value="placeholder_exercicio.png" />
                                                    </DataTrigger>
                                                </Image.Triggers>
                                            </Image>
                                        </Frame>

                                        <!-- Nome do exercício -->
                                        <Label Grid.Column="1"
                                               HorizontalOptions="Start"
                                               Margin="10,10,0,0"
                                               Text="{Binding NomeExercicio}"
                                               TextColor="White"
                                               FontFamily="QuicksandRegular"
                                               FontSize="14"/>

                                        <!-- Séries/Reps e botão menu -->
                                        <Grid Grid.Column="2" ColumnDefinitions="Auto,Auto"
                                              HorizontalOptions="End"
                                              MinimumWidthRequest="145">
                                            <Label Grid.Column="0"
                                                   Margin="45,10,0,0"
                                                   Text="{Binding SeriesReps}"
                                                   TextColor="White"
                                                   FontFamily="QuicksandRegular"
                                                   FontSize="14"/>

                                            <ImageButton Grid.Column="1"
                                                         Source="more_vert_22dp_lavender.png"                                     
                                                         HeightRequest="22"                                     
                                                         BackgroundColor="Transparent"
                                                         Margin="5,-25,0,0"
                                                         Clicked="MenuExercicio_Clicked"/>
                                        </Grid>
                                    </Grid>

                                    <BoxView HeightRequest="1" Color="#E6E6FA" Margin="0,5"/>

                                </VerticalStackLayout>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </Grid>
            </Frame>

            <!-- Botão Concluir Treino -->
            <VerticalStackLayout Grid.Row="3"
                        HorizontalOptions="Center"
                        Margin="0,10,0,20">
                <Button Text="Concluir Treino"
                        Clicked="ConcluirTreino_Clicked"
                        BackgroundColor="#4D2D8C"
                        TextColor="White"
                        FontSize="14"
                        FontFamily="QuicksandSemibold"
                        CornerRadius="20"
                        WidthRequest="327"
                        HeightRequest="40"/>
            </VerticalStackLayout>
        </Grid>

        <!-- Overlay do fundo -->
        <BoxView x:Name="OverlayFundo"
                 BackgroundColor="Black"
                 Opacity="0.01"
                 IsVisible="False"
                 AbsoluteLayout.LayoutBounds="0,0,1,1"
                 AbsoluteLayout.LayoutFlags="All">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OverlayFundo_Tapped" />
            </BoxView.GestureRecognizers>
        </BoxView>

        <!-- Menu lateral -->
        <Frame x:Name="MenuLateral"
               IsVisible="False"
               Padding="0" 
               Margin="0"
               WidthRequest="80"    
               TranslationX="22"
               TranslationY="50"
               HasShadow="False"
               BackgroundColor="Transparent"    
               BorderColor="Transparent"
               VerticalOptions="Start"
               HorizontalOptions="Start">

            <VerticalStackLayout Spacing="0">
                <Button Text="Sobre" Clicked="Sobre_Clicked"
                        BackgroundColor="Grey"
                        FontSize="12"
                        CornerRadius="0"/>
                <Button Text="Contato" Clicked="Contato_Clicked"
                        BackgroundColor="Grey"
                        FontSize="12"
                        CornerRadius="0"/>
                <Button Text="Logout" Clicked="Logout_Clicked"
                        BackgroundColor="Grey"
                        FontSize="12"
                        CornerRadius="0"/>
            </VerticalStackLayout>
        </Frame>
    </AbsoluteLayout>
</ContentPage>